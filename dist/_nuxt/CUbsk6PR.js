function f(t,n){if(t.duration<=n)return t;const a=new(window.AudioContext||window.webkitAudioContext),e=Math.floor(n*t.sampleRate),s=a.createBuffer(t.numberOfChannels,e,t.sampleRate);for(let r=0;r<t.numberOfChannels;r++){const c=t.getChannelData(r);s.getChannelData(r).set(c.subarray(0,e))}return s}function C(t){const n=t.numberOfChannels,a=t.sampleRate,e=1,s=16;let r;if(n===2){const i=t.getChannelData(0),l=t.getChannelData(1);r=new Float32Array(i.length*2);for(let u=0;u<i.length;u++)r[u*2]=i[u],r[u*2+1]=l[u]}else r=t.getChannelData(0);const c=r.length*(s/8),d=44+c,m=new ArrayBuffer(d),o=new DataView(m);h(o,0,"RIFF"),o.setUint32(4,d-8,!0),h(o,8,"WAVE"),h(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,e,!0),o.setUint16(22,n,!0),o.setUint32(24,a,!0),o.setUint32(28,a*n*(s/8),!0),o.setUint16(32,n*(s/8),!0),o.setUint16(34,s,!0),h(o,36,"data"),o.setUint32(40,c,!0);let g=44;for(let i=0;i<r.length;i++){let l=Math.max(-1,Math.min(1,r[i]));l=l<0?l*32768:l*32767,o.setInt16(g,l,!0),g+=2}return new Blob([m],{type:"audio/wav"})}function h(t,n,a){for(let e=0;e<a.length;e++)t.setUint8(n+e,a.charCodeAt(e))}function U(t){return new Promise((n,a)=>{const e=new FileReader;e.onload=()=>n(e.result),e.onerror=a,e.readAsDataURL(t)})}function A(t,n){const a=[];for(let e=0;e<t.length;e+=n)a.push(t.substring(e,e+n));return a}async function B(t,n){const a=f(t,n),e=C(a);return U(e)}const D=4*1024*1024,p=4.5*1024*1024;export{D as C,p as M,A as s,B as t};
