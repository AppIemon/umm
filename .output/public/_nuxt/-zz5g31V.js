import{e as Se,r as k,h as ve,j as _e,i as pe,c as E,o as C,a as t,k as J,n as re,F as be,l as we,t as V,s as ge,d as X,x as Ce,f as Ee,y as xe,b as $e,m as he,p as Le,v as Pe,z as Oe,g as Re,A as Be}from"./BrYDLEIV.js";import{_ as Me}from"./DlAUqK2U.js";import{_ as Ne}from"./Ckrqg4E4.js";import{G as ye}from"./DR3fCXgQ.js";import{t as Fe,M as Ue,s as Ge,C as qe}from"./CUbsk6PR.js";import{s as ze}from"./AEqb8BeY.js";const je="ImpossibleTimingDB",ae="recent_songs",Ve=2,De=20,Ye=()=>{const W=()=>new Promise((x,g)=>{const r=indexedDB.open(je,Ve);r.onerror=()=>g("IndexedDB error"),r.onupgradeneeded=o=>{const _=o.target.result;if(!_.objectStoreNames.contains(ae)){const v=_.createObjectStore(ae,{keyPath:"id"});v.createIndex("name","name",{unique:!1}),v.createIndex("addedAt","addedAt",{unique:!1})}_.objectStoreNames.contains("songs")||_.createObjectStore("songs",{keyPath:"id"})},r.onsuccess=o=>{x(o.target.result)}});return{addSong:async x=>{const g=await W();return new Promise(async(r,o)=>{try{const v=g.transaction([ae],"readwrite").objectStore(ae),w=v.index("name").getAll(x.name);w.onsuccess=async()=>{const O=w.result;for(const i of O)v.delete(i.id);const p={id:crypto.randomUUID(),name:x.name,blob:x,addedAt:Date.now()};v.add(p);const A=v.index("addedAt").getAll();A.onsuccess=()=>{const i=A.result;if(i.length>De){const T=i.sort((L,F)=>L.addedAt-F.addedAt).slice(0,i.length-De);for(const L of T)v.delete(L.id)}},r(p)},w.onerror=()=>o("Error checking duplicates")}catch(_){o(_)}})},getSongs:async()=>{const x=await W();return new Promise((g,r)=>{const v=x.transaction([ae],"readonly").objectStore(ae).getAll();v.onsuccess=()=>{const M=v.result.sort((w,O)=>O.addedAt-w.addedAt);g(M)},v.onerror=()=>r("Error fetching songs")})},deleteSong:async x=>{const g=await W();return new Promise((r,o)=>{const M=g.transaction([ae],"readwrite").objectStore(ae).delete(x);M.onsuccess=()=>r(),M.onerror=()=>o("Error deleting song")})},clearAll:async()=>{const x=await W();return new Promise((g,r)=>{const v=x.transaction([ae],"readwrite").objectStore(ae).clear();v.onsuccess=()=>g(),v.onerror=()=>r("Error clearing songs")})}}},We={class:"song-selector"},He={class:"tabs"},Je={key:0,class:"tab-content"},Xe={class:"sample-list"},Ke=["onClick"],Ze={class:"sample-info"},Qe={class:"sample-name"},et={class:"sample-meta"},tt={key:0,class:"loading-indicator"},at={key:1,class:"tab-content"},st={key:0},ot={key:1,class:"highlight"},nt={key:2,class:"tab-content"},lt={class:"youtube-guide"},it={class:"guide-steps"},rt={class:"step"},ut={class:"step-content"},ct={key:3,class:"tab-content"},dt={key:0,class:"storage-list"},ft=["onClick"],vt={class:"song-info"},pt={class:"name"},mt={class:"date"},gt=["onClick"],ht={key:1,class:"empty-state"},yt=["disabled"],bt=Se({__name:"SongSelector",emits:["select"],setup(W,{emit:B}){const h=B,c=k("samples"),y=k(null),x=k(null),g=k(null),{addSong:r,getSongs:o,deleteSong:_,clearAll:v}=Ye(),M=k([]),w=k(null),O=k([{id:"1",name:"God Chang-seop (ì‹ ì°½ì„­) 'ë°”ë¡œ ë¦¬ë¶€íŠ¸ ì •ìƒí™”' MV",genre:"K-Pop",duration:"3:30",url:"/audio/samples/God Chang-seop (ì‹ ì°½ì„­) 'ë°”ë¡œ ë¦¬ë¶€íŠ¸ ì •ìƒí™”' MV.mp3"},{id:"2",name:"I Love You",genre:"Pop",duration:"5:56",url:"/audio/samples/I Love You.mp3"},{id:"3",name:"Nyan Cat! [Official]",genre:"Electronic",duration:"5:25",url:"/audio/samples/Nyan Cat! [Official].mp3"}]),p=k(null),A=k(null),i=ve(()=>c.value==="youtube"||A.value?!1:g.value||w.value||p.value);async function n(){try{M.value=await o()}catch(d){console.error("Failed to load recent songs:",d)}}function T(d){const u=new Date(d),G=new Date().getTime()-u.getTime(),oe=Math.floor(G/6e4),ee=Math.floor(G/36e5),ie=Math.floor(G/864e5);return oe<1?"ë°©ê¸ˆ ì „":oe<60?`${oe}ë¶„ ì „`:ee<24?`${ee}ì‹œê°„ ì „`:ie<7?`${ie}ì¼ ì „`:u.toLocaleDateString()}async function L(d){p.value=d,w.value=null,g.value=null,A.value=d.id;try{const u=await fetch(d.url);if(!u.ok)throw new Error("Failed to load sample");const I=await u.blob(),G=new File([I],d.name+".mp3",{type:"audio/mpeg"});g.value=G,y.value=G}catch(u){console.error("Failed to load sample:",u),p.value=null}finally{A.value=null}}function F(d){w.value=d,g.value=null,p.value=null}async function N(d){try{await _(d),await n(),w.value?.id===d&&(w.value=null)}catch(u){console.error("Failed to delete song:",u)}}async function H(){if(se())try{await v(),M.value=[],w.value=null}catch(d){console.error("Failed to clear songs:",d)}}_e(n),pe(c,d=>{d==="storage"&&n()});function le(){x.value?.click()}function K(d){const u=d.target;u.files?.[0]&&Y(u.files[0])}function Z(d){d.dataTransfer?.files?.[0]&&Y(d.dataTransfer.files[0])}async function Y(d){y.value=d,g.value=d,w.value=null,p.value=null;try{await r(d)}catch(u){console.error("Failed to save to recent songs:",u)}}async function se(){if(c.value==="storage"&&w.value){const d=new File([w.value.blob],w.value.name,{type:w.value.blob.type||"audio/mpeg"});h("select",d)}else g.value&&h("select",g.value)}return(d,u)=>(C(),E("div",We,[t("div",He,[t("button",{class:re({active:c.value==="samples"}),onClick:u[0]||(u[0]=I=>c.value="samples")},"SAMPLES",2),t("button",{class:re({active:c.value==="upload"}),onClick:u[1]||(u[1]=I=>c.value="upload")},"UPLOAD",2),t("button",{class:re({active:c.value==="youtube"}),onClick:u[2]||(u[2]=I=>c.value="youtube")},"GUIDE",2),t("button",{class:re({active:c.value==="storage"}),onClick:u[3]||(u[3]=I=>c.value="storage")},"RECENT",2)]),c.value==="samples"?(C(),E("div",Je,[u[6]||(u[6]=t("p",{class:"section-desc"},"CC0 ë¬´ë£Œ ìŒì•… - ì €ì‘ê¶Œ ê±±ì • ì—†ì´ ë°”ë¡œ í”Œë ˆì´!",-1)),t("div",Xe,[(C(!0),E(be,null,we(O.value,I=>(C(),E("div",{key:I.id,class:re(["sample-item",{selected:p.value?.id===I.id,loading:A.value===I.id}]),onClick:G=>L(I)},[t("div",Ze,[t("span",Qe,V(I.name),1),t("span",et,V(I.genre)+" â€¢ "+V(I.duration),1)]),A.value===I.id?(C(),E("span",tt,"â—†")):J("",!0)],10,Ke))),128))])])):c.value==="upload"?(C(),E("div",at,[t("div",{class:"drop-zone",onDragover:u[4]||(u[4]=ge(()=>{},["prevent"])),onDrop:ge(Z,["prevent"]),onClick:le},[y.value?(C(),E("p",ot,V(y.value.name),1)):(C(),E("p",st,"DROP FILE HERE"))],32),t("input",{type:"file",ref_key:"fileInput",ref:x,accept:"audio/*",style:{display:"none"},onChange:K},null,544)])):c.value==="youtube"?(C(),E("div",nt,[t("div",lt,[u[11]||(u[11]=t("h3",{class:"guide-title"},"ğŸµ YouTube MP3 ë³€í™˜ ê°€ì´ë“œ",-1)),u[12]||(u[12]=t("p",{class:"guide-desc"},[X("ì €ì‘ê¶Œ ë³´í˜¸ë¥¼ ìœ„í•´ ì§ì ‘ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤."),t("br"),X("ì•„ë˜ ë°©ë²•ìœ¼ë¡œ MP3 íŒŒì¼ì„ ì¤€ë¹„í•´ì£¼ì„¸ìš”.")],-1)),t("div",it,[u[10]||(u[10]=Ce('<div class="step" data-v-b8d599b0><span class="step-num" data-v-b8d599b0>1</span><div class="step-content" data-v-b8d599b0><strong data-v-b8d599b0>YouTube ì˜ìƒ URL ë³µì‚¬</strong><p data-v-b8d599b0>ì›í•˜ëŠ” ìŒì•… ì˜ìƒì˜ ì£¼ì†Œë¥¼ ë³µì‚¬í•˜ì„¸ìš”</p></div></div><div class="step" data-v-b8d599b0><span class="step-num" data-v-b8d599b0>2</span><div class="step-content" data-v-b8d599b0><strong data-v-b8d599b0>MP3 ë³€í™˜ ì‚¬ì´íŠ¸ ì´ìš©</strong><p data-v-b8d599b0>ì•„ë˜ ì‚¬ì´íŠ¸ì—ì„œ MP3ë¡œ ë³€í™˜í•˜ì„¸ìš”</p><div class="converter-links" data-v-b8d599b0><a href="https://y2mate.com" target="_blank" rel="noopener" class="converter-link" data-v-b8d599b0><span class="link-icon" data-v-b8d599b0>ğŸ”—</span> Y2Mate </a><a href="https://ytmp3.cc" target="_blank" rel="noopener" class="converter-link" data-v-b8d599b0><span class="link-icon" data-v-b8d599b0>ğŸ”—</span> YTMP3 </a><a href="https://loader.to" target="_blank" rel="noopener" class="converter-link" data-v-b8d599b0><span class="link-icon" data-v-b8d599b0>ğŸ”—</span> Loader.to </a></div></div></div>',2)),t("div",rt,[u[9]||(u[9]=t("span",{class:"step-num"},"3",-1)),t("div",ut,[u[7]||(u[7]=t("strong",null,"MP3 íŒŒì¼ ì—…ë¡œë“œ",-1)),u[8]||(u[8]=t("p",null,"ë‹¤ìš´ë¡œë“œí•œ MP3 íŒŒì¼ì„ UPLOAD íƒ­ì—ì„œ ì—…ë¡œë“œí•˜ì„¸ìš”",-1)),t("button",{class:"go-upload-btn",onClick:u[5]||(u[5]=I=>c.value="upload")},"UPLOAD íƒ­ìœ¼ë¡œ ì´ë™ â†’")])])]),u[13]||(u[13]=t("div",{class:"warning-box"},[t("span",{class:"warning-icon"},"âš ï¸"),t("p",null,[X("ì´ìƒí•œ ìŠ¤íŒ¸ ì‚¬ì´íŠ¸ê°€ ë‚˜ì˜¬ ìˆ˜ë„ ìˆìœ¼ë‹ˆ ìë™ìœ¼ë¡œ ì—´ë¦¬ëŠ” ì‚¬ì´íŠ¸ëŠ” ë°”ë¡œ ë‹«ì•„ì£¼ì„¸ìš”."),t("br"),X("2ë²ˆì •ë„ ë‹«ìœ¼ë©´ ë‹¤ìš´ë¡œë“œê°€ ë©ë‹ˆë‹¤.")])],-1))])])):c.value==="storage"?(C(),E("div",ct,[u[15]||(u[15]=t("p",{class:"section-desc"},"ìµœê·¼ ì‚¬ìš©í•œ ë…¸ë˜ (ìµœëŒ€ 20ê³¡)",-1)),M.value.length>0?(C(),E("div",dt,[(C(!0),E(be,null,we(M.value,I=>(C(),E("div",{key:I.id,class:re(["storage-item",{selected:w.value?.id===I.id}]),onClick:G=>F(I)},[t("div",vt,[t("span",pt,V(I.name),1),t("span",mt,V(T(I.addedAt)),1)]),t("button",{class:"delete-btn",onClick:ge(G=>N(I.id),["stop"])},"âœ•",8,gt)],10,ft))),128))])):(C(),E("div",ht,[...u[14]||(u[14]=[t("p",{class:"empty-icon"},"ğŸ“",-1),t("p",{class:"empty-msg"},"ìµœê·¼ ì‚¬ìš©í•œ ë…¸ë˜ê°€ ì—†ìŠµë‹ˆë‹¤",-1),t("p",{class:"empty-hint"},"UPLOAD íƒ­ì—ì„œ ë…¸ë˜ë¥¼ ì¶”ê°€í•˜ë©´ ì—¬ê¸°ì— ê¸°ë¡ë©ë‹ˆë‹¤",-1)])])),M.value.length>0?(C(),E("button",{key:2,class:"clear-all-btn",onClick:H}," ì „ì²´ ì‚­ì œ ")):J("",!0)])):J("",!0),t("button",{class:"confirm-btn",disabled:!i.value,onClick:se}," SELECT ",8,yt)]))}}),wt=Object.assign(Me(bt,[["__scopeId","data-v-b8d599b0"]]),{__name:"SongSelector"}),St=()=>{const W=k(null);return{analyzeAudio:async(h,c,y)=>{y&&y({step:"ì˜¤ë””ì˜¤ í—¤ë”ë¥¼ ì½ëŠ” ì¤‘...",percent:5}),W.value||(W.value=new(window.AudioContext||window.webkitAudioContext));const x=await h.arrayBuffer();y&&y({step:"ì˜¤ë””ì˜¤ ë°ì´í„°ë¥¼ ë””ì½”ë”©í•˜ëŠ” ì¤‘...",percent:15});const g=await W.value.decodeAudioData(x),r=g.getChannelData(0),o=g.sampleRate,_=Math.floor(o/150);y&&y({step:"ìµœê³  ìŒëŸ‰ì„ íŒŒì•…í•˜ê³  ìˆìŠµë‹ˆë‹¤...",percent:25});for(let s=0;s<r.length;s+=_)Math.abs(r[s]||0);const v=.35-(c-1)/29*.3;y&&y({step:"ë¹„íŠ¸ íŒ¨í„´ì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...",percent:35}),y&&y({step:"ë¹„íŠ¸ íŒ¨í„´ì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤... (Energy Flux)",percent:35});const M=[];let w=0;const O=Math.floor(o*.05),p=Math.floor(o/100),A=[];let i=0;for(let s=0;s<Math.min(O,r.length);s++)i+=r[s]*r[s];for(let s=0;s<r.length-O;s+=p){const D=Math.sqrt(i/O);A.push({t:s/o,e:D});for(let $=0;$<p;$++){const P=r[s+$]||0,U=r[s+O+$]||0;i=i-P*P+U*U}i<0&&(i=0)}const n=[];for(let s=1;s<A.length;s++){const D=Math.max(0,A[s].e-A[s-1].e);n.push(D)}const T=[];for(let s=0;s<n.length;s++){const D=Math.max(0,s-100),$=Math.min(n.length,s+100);let P=0;for(let Q=D;Q<$;Q++)P+=n[Q];const U=P/($-D);T.push(U)}const L=1.8-(c-1)/29*.4;for(let s=1;s<n.length-1;s++){const D=n[s],$=T[s],P=A[s].t,U=A[s].e;if(D>$*L&&U>.02&&D>n[s-1]&&D>n[s+1]&&P-w>v&&(M.push(P),w=P),y&&s%1e3===0){const Q=35+s/n.length*40;y({step:"ì •ë°€ ë¹„íŠ¸ ë¶„ì„ ì¤‘... (Adaptive)",percent:Math.floor(Q)})}}console.log(`[AudioAnalyzer] Adaptive Logic Detected ${M.length} beats`),y&&y({step:"ì¥ì• ë¬¼ì„ ìµœì  ë°°ì¹˜í•˜ê³  ìˆìŠµë‹ˆë‹¤...",percent:75});const F=[...M];if(F.length<10){console.log("Too few beats detected, adding fallback beats...");const s=.5;for(let D=0;D<g.duration;D+=s)F.push(D)}F.sort((s,D)=>s-D),y&&y({step:"BPMì„ ë¶„ì„í•˜ëŠ” ì¤‘...",percent:80});let N=120;if(M.length>=4){const s=[];for(let D=1;D<Math.min(M.length,50);D++){const $=M[D]-M[D-1];$>.2&&$<2&&s.push($)}if(s.length>0){s.sort((P,U)=>P-U);const $=60/s[Math.floor(s.length/2)];N=Math.round($/5)*5,N=Math.max(60,Math.min(200,N))}}const le=60/N*4;console.log(`[AudioAnalyzer] Detected BPM: ${N}, Measure Length: ${le.toFixed(3)}s`),y&&y({step:"ê³¡ì˜ ë¶„ìœ„ê¸° ë³€í™”ë¥¼ ê°ì§€í•˜ëŠ” ì¤‘...",percent:85});const K=[],Z=o,Y=[];for(let s=0;s<r.length;s+=Z){let D=0;const $=Math.min(r.length,s+Z);for(let P=s;P<$;P++){const U=r[P]??0;D+=U*U}Y.push(Math.sqrt(D/($-s||1)))}const se=6;let d=0,u=Y[0]||.001,I=0,G=0;for(let s=0;s<Y.length;s++){const D=Y[s]??0;I+=D,G++;const $=s-d,P=Math.abs(D-u)/u;if($>=se&&(P>.4||$>=15)){const U=I/G;K.push({startTime:d,endTime:s,intensity:U}),d=s,I=0,G=0,u=U||.001}}if(d<Y.length){const s=G>0?I/G:0;K.push({startTime:d,endTime:g.duration,intensity:s})}const oe=Math.max(...K.map(s=>s.intensity),.001);K.forEach(s=>{s.intensity=s.intensity/oe}),y&&y({step:"ë³¼ë¥¨ì˜ íë¦„ì„ ë¶„ì„ ì¤‘...",percent:90});const ee=[],ie=Math.floor(o/10);let ue=0;for(let s=0;s<r.length;s+=ie){const D=Math.min(r.length,s+ie);let $=0;for(let U=s;U<D;U++){const Q=r[U]||0;$+=Q*Q}const P=Math.sqrt($/(D-s));ee.push(P),P>ue&&(ue=P)}if(ue>0)for(let s=0;s<ee.length;s++)ee[s]=ee[s]/ue;return y&&y({step:"ë§µ ìƒì„±ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!",percent:100}),{buffer:g,obstacles:F,sections:K,duration:g.duration,bpm:N,measureLength:le,volumeProfile:ee}}}},_t={class:"map-preview-modal-overlay"},Mt={class:"map-preview-modal glass-panel"},At={class:"modal-header"},kt={class:"preview-viewport"},xt=["width"],Dt={class:"info-footer"},fe=.5,Te=350,Tt=Se({__name:"MapPreviewModal",props:{mapData:{}},emits:["close"],setup(W,{emit:B}){const h=W,c=k(null),y=k(null),x=ve(()=>h.mapData?.duration||60),g=ve(()=>Math.ceil(x.value*Te*fe)+500),r=()=>{if(!c.value||!h.mapData)return;const o=c.value.getContext("2d");if(!o)return;const _=c.value.width,v=c.value.height;o.fillStyle="#050510",o.fillRect(0,0,_,v),o.strokeStyle="rgba(255, 255, 255, 0.05)",o.lineWidth=1;const M=100*fe;for(let p=0;p<_;p+=M)o.beginPath(),o.moveTo(p,0),o.lineTo(p,v),o.stroke();for(let p=0;p<v;p+=40*fe)o.beginPath(),o.moveTo(0,p),o.lineTo(_,p),o.stroke();o.fillStyle="rgba(255, 0, 255, 0.1)",o.fillRect(0,0,_,140*fe),o.fillStyle="rgba(0, 255, 255, 0.1)";const w=fe,O=1;if(h.mapData.beatTimes&&(o.lineWidth=2,h.mapData.beatTimes.forEach(p=>{const A=p*Te*w;o.strokeStyle="rgba(255, 255, 0, 0.3)",o.beginPath(),o.moveTo(A,0),o.lineTo(A,v),o.stroke(),o.fillStyle="#ffff00",o.fillRect(A-2,v-20,4,10)})),h.mapData.engineObstacles&&(o.fillStyle="#ff4444",o.strokeStyle="#fff",o.lineWidth=1,h.mapData.engineObstacles.forEach(p=>{const A=p.x*w,i=p.y*O,n=p.width*w,T=p.height*O;p.type==="spike"||p.type==="mini_spike"?(o.beginPath(),p.y>300?(o.moveTo(A,i+T),o.lineTo(A+n/2,i),o.lineTo(A+n,i+T)):(o.moveTo(A,i),o.lineTo(A+n/2,i+T),o.lineTo(A+n,i)),o.fill()):o.fillRect(A,i,n,T)})),h.mapData.autoplayLog&&h.mapData.autoplayLog.length>0){o.beginPath(),o.strokeStyle="#00ffff",o.lineWidth=4;let p=!0;h.mapData.autoplayLog.forEach(A=>{const i=A.x*w,n=A.y*O;p?(o.moveTo(i,n),p=!1):o.lineTo(i,n)}),o.stroke()}};return _e(()=>{r()}),pe(()=>h.mapData,r),(o,_)=>(C(),E("div",_t,[t("div",Mt,[t("div",At,[_[1]||(_[1]=Ce('<h2 data-v-2bb7f56e>MAP VISUALIZATION LOGIC</h2><div class="legend" data-v-2bb7f56e><span class="legend-item" data-v-2bb7f56e><span class="color-box note" data-v-2bb7f56e></span> Piano Notes (Beats)</span><span class="legend-item" data-v-2bb7f56e><span class="color-box path" data-v-2bb7f56e></span> Path (Trajectory)</span><span class="legend-item" data-v-2bb7f56e><span class="color-box obstacle" data-v-2bb7f56e></span> Obstacles</span></div>',2)),t("button",{class:"close-btn",onClick:_[0]||(_[0]=v=>o.$emit("close"))},"Ã—")]),t("div",kt,[t("div",{class:"scroll-container",ref_key:"scrollContainer",ref:y},[t("canvas",{ref_key:"canvas",ref:c,width:g.value,height:720},null,8,xt)],512)]),t("div",Dt,[t("p",null,"Total Duration: "+V(x.value.toFixed(1))+"s",1),t("p",null,"Total Length: "+V(g.value)+"px",1)])])]))}}),Ct=Object.assign(Me(Tt,[["__scopeId","data-v-2bb7f56e"]]),{__name:"MapPreviewModal"});class It{audioContext;constructor(){this.audioContext=new(window.AudioContext||window.webkitAudioContext)}async decodeAudio(B){return await this.audioContext.decodeAudioData(B)}async findOnsets(B,h=10){const c=B.getChannelData(0),y=B.sampleRate,x=Math.floor(y*.025),g=Math.floor(y*.005),r=[];let o=0;for(let i=0;i<Math.min(x,c.length);i++){const n=c[i]||0;o+=n*n}for(let i=0;i<c.length-x;i+=g){const n=Math.sqrt(o/x);r.push({t:i/y,e:n});for(let T=0;T<g;T++){const L=c[i+T]||0,F=c[i+x+T]||0;o=o-L*L+F*F}o<0&&(o=0)}const _=[];for(let i=1;i<r.length;i++){const n=r[i]?.e||0,T=r[i-1]?.e||0,L=Math.max(0,n-T);_.push(L)}const v=[];for(let i=0;i<_.length;i++){const n=Math.max(0,i-100),T=Math.min(_.length,i+100);let L=0;for(let N=n;N<T;N++)L+=_[N]||0;const F=L/(T-n);v.push(F)}const M=[],w=[],O=1.5,p=.1;let A=0;for(let i=1;i<_.length-1;i++){const n=_[i],T=_[i-1],L=_[i+1],F=v[i],N=r[i]?.t;n!==void 0&&T!==void 0&&L!==void 0&&F!==void 0&&N!==void 0&&n>F*O&&n>T&&n>L&&N-A>p&&(M.push(N),w.push(n),A=N)}return{times:M,peaks:w}}}class Et{engine;analyzer;status="idle";progress=0;log=[];constructor(B){this.engine=B,this.analyzer=new It}setStatus(B,h,c){this.status=B,this.progress=h,c&&this.log.push(`[${B}] ${c}`)}async generate(B,h){try{this.setStatus("analyzing_song",10,"Decoding audio...");const c=await this.analyzer.decodeAudio(B);this.setStatus("analyzing_song",20,"Detecting volume spikes...");const x=(await this.analyzer.findOnsets(c,h.difficulty)).times;this.setStatus("analyzing_song",30,`Detected ${x.length} notes (spikes).`),this.setStatus("generating_path",30,"Initial path generation..."),await new Promise(v=>setTimeout(v,500));let g=0,r=0,o=0;const _=15;for(;g<.975&&r<_;){this.setStatus("adjusting_path",30+r/_*30,`Attempt ${r+1}: Simulating...`),this.engine.generateMap(x,h.sections||[],c.duration,void 0,!0,r,h.bpm||120,h.measureLength||2);const v=this.engine.autoplayLog,M=this.calculateMatchRate(v,x);if(M>g&&(g=M),this.log.push(`Attempt ${r}: Match Rate ${(M*100).toFixed(2)}%`),g>=.975)break;r++,await new Promise(w=>setTimeout(w,100))}return g<.9?this.log.push(`Warning: Could not reach 97.5%. Best: ${(g*100).toFixed(2)}%`):this.log.push(`Success: Reached ${(g*100).toFixed(2)}% verify rate.`),this.setStatus("generating_map",70,"Finalizing map objects..."),this.setStatus("adjusting_map",80,"Optimizing obstacles..."),await new Promise(v=>setTimeout(v,500)),this.setStatus("saving_map",90,"Preparing map data..."),await new Promise(v=>setTimeout(v,500)),this.setStatus("completed",100,"Ready to save."),!0}catch(c){return this.setStatus("failed",0,`Error: ${c.message}`),console.error(c),!1}}calculateMatchRate(B,h){if(!B||B.length===0||h.length===0)return 0;const c=[];let y=!1;for(const r of B)r.holding!==y&&(c.push(r.time),y=r.holding);let x=0;const g=.1;for(const r of h)c.some(o=>Math.abs(o-r)<g)&&x++;return x/h.length}}const $t={class:"play-page"},Lt={key:0,class:"setup-container"},Pt={key:0,class:"processing-overlay"},Ot={class:"loader-content"},Rt={class:"progress-bar"},Bt={key:0,class:"time-left"},Nt={key:1},Ft={key:2,class:"failure-log"},Ut={class:"fail-tag"},Gt={key:1,class:"desc"},qt={key:2,class:"desc map-notice"},zt={class:"difficulty-select"},jt={class:"diff-header"},Vt={class:"slider-container"},Yt={key:1,class:"setup-container"},Wt={class:"processing-overlay"},Ht={class:"loader-content"},Jt={class:"progress-bar"},Xt={class:"status-detail"},Kt={class:"smart-gen-logs"},Zt={key:3,class:"mode-modal-overlay"},Qt={class:"mode-modal glass-panel"},ea={class:"mode-header-row"},ta={class:"mode-options"},aa={key:0,class:"rec-badge"},sa="umm_audio_db",ce="audio_files",oa=Se({__name:"play",setup(W){const B=Re(),h=k("upload"),c=k(null),{analyzeAudio:y}=St(),x=k(!1),g=k([]),r=k(0),o=k(""),_=k(null),v=k(null),M=k([]),w=k([]),O=k(!1),p=k({step:"",percent:0}),A=k(0),i=k(0),n=k(null),T=k(null),L=k(null),{user:F}=Ee(),N=Oe(),H=k(!1),le=k(!1),K=k(!1),Z=k(!1),Y=k(!1),se=k(!1),d=k(10),u=ve(()=>d.value<8?"EASY":d.value<16?"NORMAL":d.value<24?"HARD":"IMPOSSIBLE"),I=a=>a<8?"#00ff88":a<16?"#ffff00":a<24?"#ff8800":"#ff0000",G=a=>a<8?30:a<16?60:a<24?90:1/0,oe=async a=>{if(H.value=!1,Z.value=a==="practice",Y.value=a==="tutorial",a==="tutorial"){if(localStorage.setItem("umm_guide_seen","true"),se.value=!1,n.value&&(!n.value.autoplayLog||n.value.autoplayLog.length===0)){console.log("[Tutorial] Generating AI path for existing map...");const e=new ye({difficulty:n.value.difficulty||5,density:1,portalFrequency:.15});n.value.engineObstacles&&(e.obstacles=n.value.engineObstacles.map(m=>({...m}))),n.value.enginePortals&&(e.portals=n.value.enginePortals.map(m=>({...m}))),e.totalLength=(n.value.duration||120)*e.baseSpeed+1e3,e.computeAutoplayLog(200,360)&&e.autoplayLog.length>0&&(n.value.autoplayLog=e.autoplayLog,console.log("[Tutorial] AI Path Generated with",e.autoplayLog.length,"points"))}h.value="play"}else h.value="play"},ee=async a=>{if("type"in a&&a.type==="storage"){const f=a.data;if(n.value=f.mapData,M.value=f.mapData.beatTimes,w.value=f.mapData.sections,d.value=f.mapData.difficulty,f.mapData.audioData){const m=new(window.AudioContext||window.webkitAudioContext),b=await(await fetch(f.mapData.audioData)).arrayBuffer();v.value=await m.decodeAudioData(b),H.value=!0}else if(f.mapData._id){console.log("Loading recent map audio from IndexedDB...",f.mapData._id);try{const m=await ke(f.mapData._id);if(m){const l=new(window.AudioContext||window.webkitAudioContext),b=await m.arrayBuffer();v.value=await l.decodeAudioData(b),H.value=!0}else alert("ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (IDB Miss)")}catch(m){console.error(m)}}else alert("ì˜¤ë””ì˜¤ ë°ì´í„°ê°€ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");return}const e=a;c.value=e,O.value=!0,A.value=Date.now(),le.value=!1;try{const f=new(window.AudioContext||window.webkitAudioContext);p.value={step:"SONG ANALYSIS",percent:0};const m=await y(e,d.value,R=>{if(p.value={step:"SONG ANALYSIS",percent:R.percent},R.percent>5){const de=(Date.now()-A.value)/1e3,ne=de/(R.percent/100);i.value=Math.max(0,ne-de)}});v.value=m.buffer,M.value=m.obstacles,w.value=m.sections;const l=G(d.value),b=Math.min(m.duration,l),S=m.obstacles.filter(R=>R<=b),q=m.sections.filter(R=>R.start<=b),j=new ye({difficulty:d.value,density:1,portalFrequency:.15}),z=Date.now()+Math.floor(Math.random()*1e6);let te=!1;for(let R=0;;R++){const de=R===0?"MOVEMENT PATH GENERATION":"MOVEMENT PATH ADJUSTMENT";if(p.value={step:de,percent:R%10*10},R===0&&await new Promise(ne=>setTimeout(ne,600)),j.generateMap(S,q,b,z+R,!1,R,m.bpm,m.measureLength,m.volumeProfile),te=await j.computeAutoplayLogAsync(200,360,ne=>{p.value.percent=Math.floor(ne*100)}),te){p.value={step:"MAP GENERATION",percent:100},await new Promise(ne=>setTimeout(ne,500)),p.value={step:"MAP ADJUSTMENT",percent:100},await new Promise(ne=>setTimeout(ne,500)),p.value={step:"MAP SAVING",percent:100},T.value=null;break}if(j.validationFailureInfo&&(T.value={x:Math.floor(j.validationFailureInfo.x),y:Math.floor(j.validationFailureInfo.y),rawObstacles:j.validationFailureInfo.nearObstacles},Be(()=>$())),R>5e3)break}if(te)await new Promise(R=>setTimeout(R,500)),n.value={title:e.name.substring(0,100),difficulty:d.value,seed:z,engineObstacles:j.obstacles,enginePortals:j.portals,autoplayLog:j.autoplayLog,duration:b,beatTimes:S,sections:q,bpm:m.bpm,measureLength:m.measureLength,audioData:null},await P(n.value),ie(n.value),p.value.step="COMPLETED";else throw new Error("ì§€ë‚˜ê°ˆ ìˆ˜ ìˆëŠ” ë§µì„ ìƒì„±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");setTimeout(()=>{O.value=!1,H.value=!0},500)}catch(f){console.error(f),O.value=!1,alert(f.message||"ì˜¤ë””ì˜¤ ë¶„ì„ ë˜ëŠ” ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},ie=async a=>{const e=JSON.parse(localStorage.getItem("umm_recent_maps")||"[]"),f={id:Date.now(),name:a.title,timestamp:Date.now(),mapData:{...a,audioData:null}};e.unshift(f),localStorage.setItem("umm_recent_maps",JSON.stringify(e.slice(0,10)))},ue=()=>{h.value="play"},s=()=>{sessionStorage.getItem("umm_is_test")?(sessionStorage.removeItem("umm_is_test"),B.push("/editor")):(h.value="upload",H.value=!1,Z.value=!1,Y.value=!1)},D=async(a,e)=>{h.value="smart_gen",x.value=!0,g.value=[];const f=new ye;_.value=f;const m=new Et(f),l=ze(()=>{g.value=[...m.log],r.value=m.progress,o.value=m.status},100),b=await m.generate(a,e);clearInterval(l),b?(n.value={...e,engineObstacles:f.obstacles,enginePortals:f.portals,autoplayLog:f.autoplayLog},setTimeout(()=>{x.value=!1,h.value="play",sessionStorage.setItem("umm_edit_map",JSON.stringify(n.value))},1500)):(alert("Generation failed to reach target accuracy."),x.value=!1,h.value="upload")},$=()=>{if(!L.value||!T.value)return;const a=L.value.getContext("2d");if(!a)return;const{x:e,y:f,rawObstacles:m}=T.value,l=L.value.width,b=L.value.height;a.fillStyle="#050510",a.fillRect(0,0,l,b);const S=.5,q=e-l/2/S,j=360-b/2/S;a.strokeStyle="rgba(255,255,255,0.05)";for(let z=0;z<l;z+=20)a.beginPath(),a.moveTo(z,0),a.lineTo(z,b),a.stroke();m.forEach(z=>{a.save(),a.translate((z.x-q)*S,(z.y-j)*S),z.angle&&a.rotate(z.angle*Math.PI/180),a.fillStyle=z.type==="spike"?"#ff4444":"#555",a.strokeStyle="#ff00ff",a.lineWidth=1;const te=z.width*S,R=z.height*S;z.type==="spike"?(a.beginPath(),z.y>300?(a.moveTo(0,R),a.lineTo(te/2,0),a.lineTo(te,R)):(a.moveTo(0,0),a.lineTo(te/2,R),a.lineTo(te,0)),a.fill(),a.stroke()):(a.fillRect(0,0,te,R),a.strokeRect(0,0,te,R)),a.restore()}),a.fillStyle="#fff",a.shadowBlur=10,a.shadowColor="#00ffff",a.beginPath(),a.arc((e-q)*S,(f-j)*S,5,0,Math.PI*2),a.fill()},P=async a=>{if(!le.value&&F.value&&!(Z.value||Y.value)&&!(!c.value&&!n.value?.audioUrl))try{const e={title:(c.value?.name||n.value?.title||"Unknown Map").substring(0,100),difficulty:a.difficulty,seed:M.value.length*777+Math.floor(a.duration*100),beatTimes:M.value,sections:w.value,engineObstacles:a.engineObstacles,enginePortals:a.enginePortals,autoplayLog:a.autoplayLog,duration:a.duration,creatorName:F.value?.username||"Guest",isShared:!1};let f=null,m=!1;c.value&&v.value?(e.audioUrl=`/audio/${c.value.name}`,console.log(`[Audio] Trimming audio from ${v.value.duration}s to ${a.duration}s`),f=await Fe(v.value,a.duration),f.length>Ue?(console.log(`[Audio] Trimmed audio (${(f.length/1024/1024).toFixed(2)}MB) exceeds limit, will use chunked upload`),m=!0):e.audioData=f):n.value?.audioUrl&&(e.audioUrl=n.value.audioUrl,n.value.audioData&&n.value.audioData.length<100*1024*1024&&(e.audioData=n.value.audioData)),m&&(e.audioData=null,e.audioChunks=[]);const l=await $fetch("/api/maps",{method:"POST",body:e});if(le.value=!0,console.log(`[Database] Map successfully saved. ID: ${l._id}`),n.value&&(n.value._id=l._id),m&&f){console.log("[Audio] Starting chunked upload...");const b=Ge(f,qe);for(let S=0;S<b.length;S++)console.log(`[Audio] Uploading chunk ${S+1}/${b.length}...`),await $fetch(`/api/maps/${l._id}/audio-chunk`,{method:"POST",body:{chunkIndex:S,chunkData:b[S],totalChunks:b.length}});console.log(`[Audio] All ${b.length} chunks uploaded successfully!`)}if(!e.audioData&&!m&&c.value){console.log("Saving original audio to local IndexedDB for fast auto-load...");try{await Ie(l._id,c.value),console.log("Audio successfully saved to local IndexedDB!")}catch(b){console.error("Failed to save to IndexedDB",b)}}}catch(e){console.error("Failed to save map auto-registration:",e)}},U=async a=>{if(!n.value?._id||(!Z.value&&!Y.value&&a.score>(n.value.bestScore||0)&&(n.value.bestScore=a.score),Z.value)||!F.value)return;const e=Y.value?"tutorial_mode":n.value?._id;if(e)try{(await $fetch(`/api/maps/${e}/record`,{method:"POST",body:{score:a.score,progress:a.progress,username:F.value?.username||"Guest"}})).updated&&console.log(`[Record] New best record: ${a.score}`)}catch(f){console.error("Failed to update record:",f)}},Q=async a=>{n.value=a,M.value=a.beatTimes||[],w.value=a.sections||[],d.value=a.difficulty||10;const e=new(window.AudioContext||window.webkitAudioContext),f=e.createBuffer(1,Math.max(1,e.sampleRate*(a.duration||10)),e.sampleRate);v.value=f,H.value=!0};async function me(){localStorage.getItem("umm_guide_seen")||(se.value=!0,H.value=!0);const e=sessionStorage.getItem("umm_load_map"),f=sessionStorage.getItem("umm_smart_gen")==="true";if(e)try{const l=JSON.parse(e);if(sessionStorage.removeItem("umm_load_map"),f&&sessionStorage.removeItem("umm_smart_gen"),n.value=l,M.value=l.beatTimes,w.value=l.sections,d.value=l.difficulty,l.audioData||l.audioUrl)try{const b=window.AudioContext||window.webkitAudioContext,S=new b;let q=null;if(l.audioData)q=await(await fetch(l.audioData)).arrayBuffer();else if(l.audioUrl){const j=await fetch(l.audioUrl);j.ok&&(q=await j.arrayBuffer())}if(q)if(v.value=await S.decodeAudioData(q),f){D(q,l);return}else{H.value=!0;return}}catch(b){console.error("Audio load error",b)}f?(alert("Smart Gen requires audio!"),h.value="upload"):await Q(l);return}catch(l){console.error("Failed to parse session map:",l)}const m=N.query.map||N.query.mapId;if(m)try{O.value=!0;const l=await $fetch(`/api/maps/${m}`);if(l)if(n.value=l,M.value=l.beatTimes,w.value=l.sections,d.value=l.difficulty,l.audioData||l.audioUrl)try{let b=null;if(l.audioData&&(console.log("Loading audio from Base64 Data..."),b=await(await fetch(l.audioData)).arrayBuffer()),!b){console.log("Checking local IndexedDB for audio...");try{const S=await ke(l._id);S&&(console.log("Found audio in local DB!"),b=await S.arrayBuffer())}catch(S){console.warn("IndexedDB check failed",S)}}if(!b&&l.audioUrl){console.log("Loading audio from URL:",l.audioUrl);try{const S=await fetch(l.audioUrl);S.ok?b=await S.arrayBuffer():console.warn("Audio URL fetch failed:",S.status)}catch(S){console.warn("Audio URL fetch error",S)}}if(b){const S=window.AudioContext||window.webkitAudioContext,q=new S;v.value=await q.decodeAudioData(b),H.value=!0}else console.log("Could not find audio source. Prompting user."),alert(`ì˜¤ë””ì˜¤ íŒŒì¼ì„ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. (ì„œë²„/ë¡œì»¬ ì €ì¥ì†Œ ì—†ìŒ)
ì›ë³¸ ìŒì•… íŒŒì¼ì„ ë‹¤ì‹œ ì„ íƒí•´ì£¼ì„¸ìš”.`)}catch(b){console.warn("Auto-load failed, waiting for user file",b),alert("ì˜¤ë””ì˜¤ ë¡œë”© ì‹¤íŒ¨. íŒŒì¼ì„ ìˆ˜ë™ìœ¼ë¡œ ì„ íƒí•´ì£¼ì„¸ìš”.")}else await Q(l)}catch(l){console.error("Failed to load map:",l)}finally{O.value=!1}}_e(me),pe(()=>N.query.map,a=>{a&&me()}),pe(()=>N.query.mapId,a=>{a&&me()});const Ae=()=>new Promise((a,e)=>{const f=indexedDB.open(sa,1);f.onupgradeneeded=m=>{const l=m.target.result;l.objectStoreNames.contains(ce)||l.createObjectStore(ce)},f.onsuccess=m=>a(m.target.result),f.onerror=m=>e(m)}),Ie=async(a,e)=>{const f=await Ae();return new Promise((m,l)=>{const q=f.transaction(ce,"readwrite").objectStore(ce).put(e,a);q.onsuccess=()=>m(),q.onerror=()=>l(q.error)})},ke=async a=>{const e=await Ae();return new Promise((f,m)=>{const S=e.transaction(ce,"readonly").objectStore(ce).get(a);S.onsuccess=()=>f(S.result),S.onerror=()=>m(S.error)})};return(a,e)=>{const f=wt,m=Ne;return C(),E("div",$t,[e[23]||(e[23]=t("div",{class:"background-anim"},null,-1)),h.value==="upload"?(C(),E("div",Lt,[O.value?(C(),E("div",Pt,[t("div",Ot,[e[7]||(e[7]=t("div",{class:"wave-loader"},"â—†",-1)),t("h2",null,V(p.value.step||"ë§µ ìƒì„± ì¤‘..."),1),t("div",Rt,[t("div",{class:"fill",style:he({width:p.value.percent+"%",animation:"none"})},null,4)]),i.value>0?(C(),E("p",Bt,"ì˜ˆìƒ ë‚¨ì€ ì‹œê°„: ì•½ "+V(Math.ceil(i.value))+"ì´ˆ",1)):p.value.percent>0?(C(),E("p",Nt,"ê±°ì˜ ë‹¤ ë˜ì—ˆìŠµë‹ˆë‹¤...")):J("",!0),T.value?(C(),E("div",Ft,[t("span",Ut,"CRITICAL BLOCKAGE AT "+V(T.value.x),1),t("canvas",{ref_key:"failCanvas",ref:L,width:"300",height:"150",class:"fail-preview"},null,512),e[6]||(e[6]=t("div",{class:"fail-details"}," AI failed to find a path through this section. ",-1))])):J("",!0)])])):J("",!0),e[13]||(e[13]=t("div",{class:"header-icon"},"â—†",-1)),e[14]||(e[14]=t("h1",{class:"title"},"ULTRA MUSIC MANIA",-1)),n.value?(C(),E("p",qt,[e[8]||(e[8]=X(" ë¡œë“œëœ ë§µ: ",-1)),t("strong",null,V(n.value.title),1),e[9]||(e[9]=t("br",null,null,-1)),e[10]||(e[10]=X(" ê²Œì„ì„ ì‹œì‘í•˜ë ¤ë©´ ì´ ë§µì— ì‚¬ìš©ëœ ë…¸ë˜ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”. ",-1))])):(C(),E("p",Gt,"ìŒì•… íŒŒì¼ì„ ì„ íƒí•˜ë©´ ìë™ìœ¼ë¡œ ë§µì´ ìƒì„±ë©ë‹ˆë‹¤")),$e(f,{onSelect:ee}),t("div",zt,[t("div",jt,[e[11]||(e[11]=t("label",null,"ë‚œì´ë„ ì„¤ì •:",-1)),t("span",{class:"diff-value",style:he({color:I(d.value)})},V(u.value)+" ("+V(d.value)+") ",5)]),t("div",Vt,[Le(t("input",{type:"range",min:"1",max:"30","onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),class:"diff-slider"},null,512),[[Pe,d.value,void 0,{number:!0}]]),e[12]||(e[12]=t("div",{class:"slider-marks"},[t("span",null,"EASY"),t("span",null,"NORMAL"),t("span",null,"HARD"),t("span",null,"INSANE")],-1))])])])):J("",!0),h.value==="smart_gen"?(C(),E("div",Yt,[t("div",Wt,[t("div",Ht,[e[15]||(e[15]=t("div",{class:"wave-loader"},"âœ¨",-1)),e[16]||(e[16]=t("h2",null,"SMART GENERATION",-1)),t("div",Jt,[t("div",{class:"fill",style:he({width:r.value+"%"})},null,4)]),t("p",Xt,V(o.value.toUpperCase().replace("_"," ")),1),t("div",Kt,[(C(!0),E(be,null,we(g.value.slice(-5),(l,b)=>(C(),E("div",{key:b,class:"log-entry"},V(l),1))),128))])])])])):J("",!0),h.value==="play"?(C(),xe(m,{key:2,audioBuffer:v.value,obstacles:M.value,sections:w.value,loadMap:n.value,difficulty:d.value,practiceMode:Z.value,tutorialMode:Y.value,onRetry:ue,onExit:s,onMapReady:P,onRecordUpdate:U},null,8,["audioBuffer","obstacles","sections","loadMap","difficulty","practiceMode","tutorialMode"])):J("",!0),H.value?(C(),E("div",Zt,[t("div",Qt,[t("div",ea,[e[17]||(e[17]=t("h2",null,"SELECT GAME MODE",-1)),t("button",{class:"debug-btn",onClick:e[1]||(e[1]=l=>K.value=!0),title:"View Map Logic"}," ğŸ” Map Logic ")]),t("div",ta,[t("button",{onClick:e[2]||(e[2]=l=>oe("practice")),class:"mode-btn practice"},[...e[18]||(e[18]=[t("div",{class:"mode-icon"},"ğŸ› ï¸",-1),t("h3",null,"PRACTICE MODE",-1),t("p",null,[X("ì²´í¬í¬ì¸íŠ¸ ì‚¬ìš© ê°€ëŠ¥"),t("br"),X("ê¸°ë¡ ë¯¸ì €ì¥")],-1)])]),t("button",{onClick:e[3]||(e[3]=l=>oe("normal")),class:"mode-btn normal"},[...e[19]||(e[19]=[t("div",{class:"mode-icon"},"ğŸµ",-1),t("h3",null,"NORMAL MODE",-1),t("p",null,[X("í‘œì¤€ í”Œë ˆì´"),t("br"),X("ë­í‚¹ ê¸°ë¡ ì €ì¥")],-1)])]),t("button",{onClick:e[4]||(e[4]=l=>oe("tutorial")),class:re(["mode-btn tutorial",{recommended:se.value}])},[e[20]||(e[20]=t("div",{class:"mode-icon"},"ğŸ“",-1)),se.value?(C(),E("div",aa,"RECOMMENDED")):J("",!0),e[21]||(e[21]=t("h3",null,"TUTORIAL MODE",-1)),e[22]||(e[22]=t("p",null,[X("ê²Œì„ ê°€ì´ë“œ"),t("br"),X("ê¸°ì´ˆ ë°°ìš°ê¸°")],-1))],2)])])])):J("",!0),K.value?(C(),xe(Ct,{key:4,mapData:n.value,onClose:e[5]||(e[5]=l=>K.value=!1)},null,8,["mapData"])):J("",!0)])}}}),da=Me(oa,[["__scopeId","data-v-4c531971"]]);export{da as default};
