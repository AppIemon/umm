import{e as Ce,f as Ie,r as T,j as _e,C as Ae,c as E,a as n,d as K,p as k,v as S,t as P,B as ie,F as se,l as oe,s as De,k as W,D as Le,g as Re,o as C,n as ue}from"./WAmU0kQL.js";import{G as re}from"./DFEaFFwn.js";import{C as de,s as Ue}from"./CUbsk6PR.js";import{_ as be}from"./DlAUqK2U.js";const Ne={class:"editor-page"},Be={class:"editor-header glass-panel"},Ve={class:"left"},Ye={class:"map-meta"},We={class:"creator"},Xe={class:"center"},Fe={class:"transport-controls"},$e={class:"right"},Ge={class:"config-summary"},He={class:"stat"},Je={class:"stat"},ze={class:"main-layout"},Ke={class:"sidebar left-sidebar glass-panel"},Ze={class:"object-list"},qe=["onClick"],Qe={class:"symbol"},je={class:"name"},et=["onClick"],tt={class:"symbol"},lt={class:"name"},at={class:"grid-info"},nt={class:"timeline-container"},it=["max"],st={class:"sidebar right-sidebar glass-panel"},ot={key:0,class:"properties-list"},ut={class:"prop-group"},rt={class:"prop-val-static"},dt={class:"prop-group"},vt={class:"input-pair"},ht={class:"prop-group"},ft={class:"input-pair"},ct={key:0,class:"prop-group"},pt={class:"rotation-controls"},mt={key:1,class:"prop-group"},gt={key:1,class:"movement-details"},yt={key:1,class:"properties-list"},wt={class:"prop-group"},xt={class:"prop-val-static"},Mt={key:2,class:"empty-selection"},kt={class:"global-settings prop-group"},Tt={class:"audio-settings prop-group"},St={class:"audio-upload"},Ot={key:0,class:"audio-hint"},Pt=Ce({__name:"editor",setup(Et){const Z=Re(),{user:q}=Ie(),V=new re,u=T({title:"NEW UNTITLED MAP",duration:60,difficulty:10,engineObstacles:[],enginePortals:[],beatTimes:[],sections:[],seed:0,bpm:120,measureLength:2}),X=T(60*350+500),f=T(0),c=T(1),s=T([]),Y=T("spike"),ve=T(null),w=T(null),Q=T(null),H=["spike","block","saw","mini_spike","laser","spike_ball","v_laser","mine","orb","slope"],he=["gravity_yellow","gravity_blue","speed_0.25","speed_0.5","speed_1","speed_2","speed_3","speed_4","mini_pink","mini_green"],fe=e=>V.getPortalSymbol(e)||"â– ",ce=e=>V.getPortalSymbol(e),_=T([]),A=T(-1),U=T([]),R=T(!1),b=T(!1),y=T({x1:0,y1:0,x2:0,y2:0}),N=()=>{const e=JSON.stringify(u.value);_.value[A.value]!==e&&(_.value=_.value.slice(0,A.value+1),_.value.push(e),_.value.length>50?_.value.shift():A.value++)},pe=()=>{A.value>0&&(A.value--,u.value=JSON.parse(_.value[A.value]))},me=()=>{A.value<_.value.length-1&&(A.value++,u.value=JSON.parse(_.value[A.value]))};let J=!1,F=!1,$=!1,B="",j=0,ee=0,z=new Map;const ge=(e,l,a)=>{const o=10/c.value;return Math.abs(e-a.x)<o&&Math.abs(l-a.y)<o?"tl":Math.abs(e-(a.x+a.width))<o&&Math.abs(l-a.y)<o?"tr":Math.abs(e-a.x)<o&&Math.abs(l-(a.y+a.height))<o?"bl":Math.abs(e-(a.x+a.width))<o&&Math.abs(l-(a.y+a.height))<o?"br":null},ye=e=>{if(e.button===1){J=!0,j=e.clientX,ee=f.value,e.preventDefault();return}if(e.button===2){if(!w.value)return;b.value=!0;const t=w.value.getBoundingClientRect(),i=w.value.width/t.width,g=w.value.height/t.height,r=(e.clientX-t.left)*i/c.value+f.value,v=(e.clientY-t.top)*g/c.value;y.value={x1:r,y1:v,x2:r,y2:v},e.preventDefault();return}if(e.button!==0||!w.value)return;const l=w.value.getBoundingClientRect(),a=w.value.width/l.width,o=w.value.height/l.height;let d=(e.clientX-l.left)*a/c.value+f.value,m=(e.clientY-l.top)*o/c.value;if(R.value&&(d=Math.round(d/25)*25,m=Math.round(m/25)*25),s.value.length===1){const t=ge(d,m,s.value[0]);if(t){$=!0,B=t;return}}const h=ke(d,m);if(h){if(R.value){const t=s.value.indexOf(h);t===-1?s.value.push(h):s.value.splice(t,1)}else s.value.includes(h)||(s.value=[h]);s.value.includes(h)&&(F=!0,z.clear(),s.value.forEach(t=>{z.set(t,{x:t.x-d,y:t.y-m})}))}else R.value||(s.value=[]),Te(d,m),N()},we=e=>{if(!w.value)return;const l=w.value.getBoundingClientRect(),a=w.value.width/l.width,o=w.value.height/l.height;let d=(e.clientX-l.left)*a/c.value+f.value,m=(e.clientY-l.top)*o/c.value;const h=d,t=m;if(R.value&&!b.value&&(d=Math.round(d/25)*25,m=Math.round(m/25)*25),J){const i=e.clientX-j;f.value=Math.max(0,ee-i/c.value)}else if(b.value)y.value.x2=h,y.value.y2=t;else if($&&s.value.length===1){const i=s.value[0];if(B==="br")i.width=Math.max(10,d-i.x),i.height=Math.max(10,m-i.y);else if(B==="bl"){const g=i.x+i.width;i.x=Math.min(g-10,d),i.width=g-i.x,i.height=Math.max(10,m-i.y)}else if(B==="tr"){const g=i.y+i.height;i.y=Math.min(g-10,m),i.height=g-i.y,i.width=Math.max(10,d-i.x)}else if(B==="tl"){const g=i.x+i.width,r=i.y+i.height;i.x=Math.min(g-10,d),i.y=Math.min(r-10,m),i.width=g-i.x,i.height=r-i.y}}else F&&s.value.forEach(i=>{const g=z.get(i);if(g){let r=h+g.x,v=t+g.y;R.value&&(r=Math.round(r/25)*25,v=Math.round(v/25)*25),i.x=r,i.y=v,"initialY"in i&&(i.initialY=v)}})},xe=()=>{if(b.value){const e=Math.min(y.value.x1,y.value.x2),l=Math.max(y.value.x1,y.value.x2),a=Math.min(y.value.y1,y.value.y2),o=Math.max(y.value.y1,y.value.y2),d=h=>{const t=h.x,i=h.x+h.width,g=h.y,r=h.y+h.height;return!(i<e||t>l||r<a||g>o)},m=[...u.value.engineObstacles.filter(d),...u.value.enginePortals.filter(d)];s.value=m,b.value=!1}else(F||$)&&N();J=!1,F=!1,$=!1,B=""},Me=e=>{if(e.ctrlKey){e.preventDefault();const l=e.deltaY>0?.9:1.1;c.value=Math.max(.1,Math.min(5,c.value*l))}else f.value=Math.max(0,f.value+e.deltaY)},ke=(e,l)=>{for(const a of u.value.engineObstacles)if(e>=a.x&&e<=a.x+a.width&&l>=a.y&&l<=a.y+a.height)return a;for(const a of u.value.enginePortals)if(e>=a.x&&e<=a.x+a.width&&l>=a.y&&l<=a.y+a.height)return a;return null},Te=(e,l)=>{const a=Y.value;if(H.includes(a)){const o={x:e,y:l-25,width:50,height:50,type:a,angle:0,initialY:l-25,movement:{type:"none",range:0,speed:0,phase:0}};u.value.engineObstacles.push(o),s.value=[o]}else{const o={x:e,y:l-30,width:60,height:80,type:a,angle:0,activated:!1};u.value.enginePortals.push(o),s.value=[o]}},G=()=>{s.value.length!==0&&(u.value.engineObstacles=u.value.engineObstacles.filter(e=>!s.value.includes(e)),u.value.enginePortals=u.value.enginePortals.filter(e=>!s.value.includes(e)),s.value=[],N())},te=()=>{X.value=u.value.duration*350+500},Se=()=>Q.value?.click(),Oe=e=>{const l=e.target.files?.[0];if(!l)return;const a=new FileReader;a.onload=o=>{u.value.audioData=o.target?.result,u.value.audioUrl=`/audio/${l.name}`,(!u.value.title||u.value.title==="NEW UNTITLED MAP")&&(u.value.title=l.name.split(".")[0]),alert("Audio file loaded and embedded!")},a.readAsDataURL(l)},Pe=async()=>{const e=new re;e.obstacles=[...u.value.engineObstacles],e.portals=[...u.value.enginePortals],e.totalLength=X.value;const l=await e.computeAutoplayLogAsync(200,360,()=>{});u.value.autoplayLog=e.autoplayLog,!(!l&&!confirm("AI cannot finish this map! Play anyway?"))&&(sessionStorage.setItem("umm_edit_map",JSON.stringify(u.value)),sessionStorage.setItem("umm_is_test","true"),sessionStorage.setItem("umm_load_map",JSON.stringify(u.value)),Z.push("/play"))},Ee=async()=>{try{const e=!u.value._id,l=e?"/api/maps":`/api/maps/${u.value._id}`,a=e?"POST":"PATCH";e&&(u.value.creatorName=q.value?.username||"Guest");const o=u.value.audioData;if(o&&o.length>de){const d=Ue(o,de),m={...u.value,audioData:null,audioChunks:[]},t=(await $fetch(l,{method:a,body:m}))._id;e&&(u.value._id=t);for(let i=0;i<d.length;i++)await $fetch(`/api/maps/${t}/audio-chunk`,{method:"POST",body:{chunkIndex:i,chunkData:d[i],totalChunks:d.length}});alert(`Map saved! (Audio: ${d.length} chunks)`)}else{const d=await $fetch(l,{method:a,body:u.value});e&&(u.value._id=d._id),alert("Map saved successfully!")}}catch(e){console.error("Save error:",e),alert(`Failed to save map: ${e.message||"Unknown error"}`)}};let le;const ae=()=>{if(!w.value)return;const e=w.value.getContext("2d");if(!e)return;const l=w.value.width,a=w.value.height,o=performance.now()/1e3;e.clearRect(0,0,l,a),e.fillStyle="#050510",e.fillRect(0,0,l,a),e.save(),e.scale(c.value,c.value),e.translate(-f.value,0),e.strokeStyle="rgba(255, 255, 255, 0.05)";const d=50,m=Math.floor(f.value/d)*d;for(let t=m;t<f.value+l/c.value;t+=d)e.beginPath(),e.moveTo(t,0),e.lineTo(t,a/c.value),e.stroke();for(let t=0;t<a/c.value;t+=d)e.beginPath(),e.moveTo(f.value,t),e.lineTo(f.value+l/c.value,t),e.stroke();e.fillStyle="rgba(255, 0, 0, 0.1)",e.fillRect(f.value,0,l/c.value,140),e.fillRect(f.value,580,l/c.value,a/c.value-580),e.strokeStyle="#ff3333",e.lineWidth=3,e.beginPath(),e.moveTo(f.value,140),e.lineTo(f.value+l/c.value,140),e.stroke(),e.beginPath(),e.moveTo(f.value,580),e.lineTo(f.value+l/c.value,580),e.stroke(),e.fillStyle="#ff3333",e.font="bold 12px Outfit",e.fillText("CEILING BOUNDARY",f.value+10,130),e.fillText("FLOOR BOUNDARY",f.value+10,575),u.value.enginePortals.forEach(t=>{const i=V.getPortalColor(t.type);e.save(),t.angle&&(e.translate(t.x+t.width/2,t.y+t.height/2),e.rotate(t.angle*Math.PI/180),e.translate(-(t.x+t.width/2),-(t.y+t.height/2))),e.fillStyle=i,e.shadowBlur=15,e.shadowColor=i,e.globalAlpha=.2,e.fillRect(t.x,t.y,t.width,t.height),e.globalAlpha=1,e.strokeStyle="#fff",e.lineWidth=2,e.strokeRect(t.x,t.y,t.width,t.height),e.fillStyle="#fff",e.font="bold 20px Outfit",e.textAlign="center",e.fillText(V.getPortalSymbol(t.type),t.x+t.width/2,t.y+t.height/2+8),e.restore(),s.value.includes(t)&&(e.strokeStyle="#00ffff",e.lineWidth=3,e.strokeRect(t.x-5,t.y-5,t.width+10,t.height+10))}),u.value.engineObstacles.forEach(t=>{e.save(),t.angle!==void 0&&t.angle!==0&&(e.translate(t.x+t.width/2,t.y+t.height/2),e.rotate(t.angle*Math.PI/180),e.translate(-(t.x+t.width/2),-(t.y+t.height/2))),t.movement&&t.movement.type==="updown"&&(e.strokeStyle="rgba(0, 255, 255, 0.1)",e.beginPath(),e.moveTo(t.x+t.width/2,(t.initialY||t.y)-t.movement.range),e.lineTo(t.x+t.width/2,(t.initialY||t.y)+t.movement.range),e.stroke());const g=V.getObstacleStateAt(t,o),r=t.x,v=g.y;if(g.angle,t.type==="spike"||t.type==="mini_spike")e.fillStyle="#ff4d4d",e.shadowBlur=10,e.shadowColor="#ff0000",e.beginPath(),v>300?(e.moveTo(r,v+t.height),e.lineTo(r+t.width/2,v),e.lineTo(r+t.width,v+t.height)):(e.moveTo(r,v),e.lineTo(r+t.width/2,v+t.height),e.lineTo(r+t.width,v)),e.closePath(),e.fill();else if(t.type==="block")e.fillStyle="#444",e.shadowBlur=5,e.shadowColor="#666",e.fillRect(r,v,t.width,t.height),e.fillStyle="#555",e.fillRect(r+2,v+2,t.width-4,t.height-4);else if(t.type==="slope")e.fillStyle="#222",e.shadowBlur=15,e.shadowColor="#000",e.beginPath(),t.angle>0?(e.moveTo(r,v+t.height),e.lineTo(r+t.width,v),e.lineTo(r,v)):(e.moveTo(r+t.width,v+t.height),e.lineTo(r,v),e.lineTo(r+t.width,v)),e.closePath(),e.fill(),e.strokeStyle="rgba(100,200,255,0.3)",e.lineWidth=3,e.stroke();else if(t.type==="saw"){const x=r+t.width/2,M=v+t.height/2,p=t.width/2;e.fillStyle="#ffaa00",e.shadowBlur=20,e.shadowColor="#ffaa00",e.beginPath(),e.arc(x,M,p,0,Math.PI*2),e.fill(),e.fillStyle="#ff6600";const O=10,D=o*8;for(let I=0;I<O;I++){const L=Math.PI*2*I/O+D;e.beginPath(),t.movement?.type,e.arc(x+Math.cos(L)*p*.75,M+Math.sin(L)*p*.75,p*.15,0,Math.PI*2),e.fill()}}else if(t.type==="spike_ball"){const x=r+t.width/2,M=v+t.height/2,p=t.width/2,O=o*3;e.fillStyle="#444";for(let I=0;I<8;I++){const L=Math.PI*2*I/8+O;e.beginPath(),e.moveTo(x+Math.cos(L-.2)*p*.8,M+Math.sin(L-.2)*p*.8),e.lineTo(x+Math.cos(L)*p*1.2,M+Math.sin(L)*p*1.2),e.lineTo(x+Math.cos(L+.2)*p*.8,M+Math.sin(L+.2)*p*.8),e.fill()}const D=e.createRadialGradient(x-p*.3,M-p*.3,p*.1,x,M,p);D.addColorStop(0,"#888"),D.addColorStop(1,"#222"),e.fillStyle=D,e.beginPath(),e.arc(x,M,p*.8,0,Math.PI*2),e.fill()}else if(t.type==="laser"||t.type==="v_laser"){const x=t.type==="v_laser",M=Math.sin(o*15)*5+10;e.strokeStyle="#ff3333",e.lineWidth=2,e.shadowBlur=Math.max(0,M),e.shadowColor="#ff0000",e.beginPath(),x?(e.moveTo(r+t.width/2,v),e.lineTo(r+t.width/2,v+t.height)):(e.moveTo(r,v+t.height/2),e.lineTo(r+t.width,v+t.height/2)),e.stroke(),e.strokeStyle="#fff",e.lineWidth=1,e.shadowBlur=0,e.stroke()}else if(t.type==="mine"){const x=r+t.width/2,M=v+t.height/2,p=t.width/2,O=Math.sin(o*10)*.1+.9;e.fillStyle="#ff3333",e.shadowBlur=10,e.shadowColor="#ff0000",e.beginPath();for(let D=0;D<6;D++){const I=Math.PI/3*D+o*2;e.lineTo(x+Math.cos(I)*p*O,M+Math.sin(I)*p*O)}e.closePath(),e.fill()}else if(t.type==="orb"){const x=r+t.width/2,M=v+t.height/2,p=t.width/2*(Math.sin(o*5)*.1+1),O=e.createRadialGradient(x,M,p*.1,x,M,p);O.addColorStop(0,"#fff"),O.addColorStop(.4,"#aa44ff"),O.addColorStop(1,"rgba(68,0,204,0)"),e.fillStyle=O,e.globalCompositeOperation="lighter",e.beginPath(),e.arc(x,M,p,0,Math.PI*2),e.fill(),e.globalCompositeOperation="source-over"}e.restore()});const h=X.value;if(e.strokeStyle="#00ff88",e.lineWidth=8,e.setLineDash([15,10]),e.beginPath(),e.moveTo(h,0),e.lineTo(h,a/c.value),e.stroke(),e.setLineDash([]),e.fillStyle="#00ff88",e.font="900 32px Outfit",e.textAlign="center",e.fillText("FINISH LINE",h,100),e.textAlign="left",s.value.forEach(t=>{if(e.save(),e.strokeStyle="#00ffff",e.lineWidth=2,e.setLineDash([5,5]),e.strokeRect(t.x,t.y,t.width,t.height),e.setLineDash([]),s.value.length===1){e.fillStyle="#fff";const i=6/c.value;e.fillRect(t.x-i,t.y-i,i*2,i*2),e.fillRect(t.x+t.width-i,t.y-i,i*2,i*2),e.fillRect(t.x-i,t.y+t.height-i,i*2,i*2),e.fillRect(t.x+t.width-i,t.y+t.height-i,i*2,i*2)}e.restore()}),b.value){e.fillStyle="rgba(0, 255, 255, 0.1)",e.strokeStyle="#00ffff",e.lineWidth=1;const t=Math.min(y.value.x1,y.value.x2),i=Math.min(y.value.y1,y.value.y2),g=Math.abs(y.value.x2-y.value.x1),r=Math.abs(y.value.y2-y.value.y1);e.fillRect(t,i,g,r),e.strokeRect(t,i,g,r)}e.restore(),le=requestAnimationFrame(ae)},ne=e=>{s.value.forEach(l=>{"angle"in l&&(l.angle=(l.angle||0)+e,l.angle<0&&(l.angle+=360),l.angle>=360&&(l.angle-=360))}),N()};return _e(()=>{const e=sessionStorage.getItem("umm_edit_map");e&&(u.value=JSON.parse(e),sessionStorage.removeItem("umm_edit_map"),te()),N(),ae();const l=o=>{if(!(o.target instanceof HTMLInputElement||o.target instanceof HTMLTextAreaElement||o.target instanceof HTMLSelectElement))if(o.key==="Shift"&&(R.value=!0),o.ctrlKey||o.metaKey)if(o.key==="c")s.value.length>0&&(U.value=s.value.map(d=>({...d,_id:void 0})));else if(o.key==="x")s.value.length>0&&(U.value=s.value.map(d=>({...d,_id:void 0})),G());else if(o.key==="v"){if(U.value.length>0){const d=Math.min(...U.value.map(h=>h.x));Math.min(...U.value.map(h=>h.y));const m=U.value.map(h=>{const t={...h,x:f.value+(h.x-d)+100,y:h.y};return H.includes(t.type)?u.value.engineObstacles.push(t):u.value.enginePortals.push(t),t});s.value=m,N()}}else o.key==="z"?pe():o.key==="y"&&me();else(o.key==="Delete"||o.key==="Backspace")&&s.value.length>0&&G()},a=o=>{o.key==="Shift"&&(R.value=!1)};window.addEventListener("keydown",l),window.addEventListener("keyup",a),Ae(()=>{window.removeEventListener("keydown",l),window.removeEventListener("keyup",a),cancelAnimationFrame(le)})}),(e,l)=>(C(),E("div",Ne,[l[43]||(l[43]=n("div",{class:"background-anim"},null,-1)),n("header",Be,[n("div",Ve,[l[20]||(l[20]=n("h1",{class:"title"},[K("MAP_ARCHITECT "),n("span",{class:"version"},"v2.0")],-1)),n("div",Ye,[k(n("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>u.value.title=a),placeholder:"Map Title",class:"map-title-input"},null,512),[[S,u.value.title]]),n("span",We,"BY: "+P(ie(q)?.username||"Guest"),1)])]),n("div",Xe,[n("div",Fe,[n("button",{onClick:Pe,class:"control-btn test"},[...l[21]||(l[21]=[n("span",{class:"icon"},"â–¶",-1),K(" TEST ",-1)])]),n("button",{onClick:Ee,class:"control-btn save"},[...l[22]||(l[22]=[n("span",{class:"icon"},"ðŸ’¾",-1),K(" SAVE ",-1)])]),n("button",{onClick:l[1]||(l[1]=a=>ie(Z).push("/maps")),class:"control-btn exit"},"EXIT")])]),n("div",$e,[n("div",Ge,[n("span",He,"OBJ: "+P(u.value.engineObstacles.length),1),n("span",Je,"PORT: "+P(u.value.enginePortals.length),1)])])]),n("div",ze,[n("aside",Ke,[l[24]||(l[24]=n("h3",null,"PALETTE",-1)),n("div",Ze,[(C(),E(se,null,oe(H,a=>n("div",{key:a,class:ue(["palette-item",{selected:Y.value===a}]),onClick:o=>Y.value=a},[n("div",Qe,P(fe(a)),1),n("span",je,P(a.split("_").join(" ").toUpperCase()),1)],10,qe)),64)),l[23]||(l[23]=n("div",{class:"separator"},"PORTALS",-1)),(C(),E(se,null,oe(he,a=>n("div",{key:a,class:ue(["palette-item portal",{selected:Y.value===a}]),onClick:o=>Y.value=a},[n("div",tt,P(ce(a)),1),n("span",lt,P(a.split("_").join(" ").toUpperCase()),1)],10,et)),64))])]),n("main",{class:"workspace glass-panel",ref_key:"workspaceRef",ref:ve,onMousedown:ye,onMousemove:we,onMouseup:xe,onWheel:Me,onContextmenu:l[3]||(l[3]=De(()=>{},["prevent"]))},[n("canvas",{ref_key:"canvasRef",ref:w,width:"1200",height:"600",class:"editor-canvas"},null,512),n("div",at,[n("span",null,"ZOOM: "+P((c.value*100).toFixed(0))+"%",1),n("span",null,"X: "+P(Math.floor(f.value)),1)]),n("div",nt,[k(n("input",{type:"range",min:"0",max:X.value,"onUpdate:modelValue":l[2]||(l[2]=a=>f.value=a),class:"timeline-slider"},null,8,it),[[S,f.value,void 0,{number:!0}]])])],544),n("aside",st,[l[42]||(l[42]=n("h3",null,"PROPERTIES",-1)),s.value.length===1?(C(),E("div",ot,[n("div",ut,[l[25]||(l[25]=n("label",null,"TYPE",-1)),n("span",rt,P(s.value[0].type.toUpperCase()),1)]),n("div",dt,[l[26]||(l[26]=n("label",null,"POSITION X / Y",-1)),n("div",vt,[k(n("input",{type:"number","onUpdate:modelValue":l[4]||(l[4]=a=>s.value[0].x=a)},null,512),[[S,s.value[0].x,void 0,{number:!0}]]),k(n("input",{type:"number","onUpdate:modelValue":l[5]||(l[5]=a=>s.value[0].y=a)},null,512),[[S,s.value[0].y,void 0,{number:!0}]])])]),n("div",ht,[l[27]||(l[27]=n("label",null,"SIZE W / H",-1)),n("div",ft,[k(n("input",{type:"number","onUpdate:modelValue":l[6]||(l[6]=a=>s.value[0].width=a)},null,512),[[S,s.value[0].width,void 0,{number:!0}]]),k(n("input",{type:"number","onUpdate:modelValue":l[7]||(l[7]=a=>s.value[0].height=a)},null,512),[[S,s.value[0].height,void 0,{number:!0}]])])]),"type"in s.value[0]?(C(),E("div",ct,[l[28]||(l[28]=n("label",null,"ROTATION (DEG)",-1)),n("div",pt,[n("button",{onClick:l[8]||(l[8]=a=>ne(-45)),class:"rot-btn"},"â†º -45Â°"),n("button",{onClick:l[9]||(l[9]=a=>ne(45)),class:"rot-btn"},"45Â° â†»")]),k(n("input",{type:"number","onUpdate:modelValue":l[10]||(l[10]=a=>s.value[0].angle=a)},null,512),[[S,s.value[0].angle,void 0,{number:!0}]]),k(n("input",{type:"range",min:"0",max:"360","onUpdate:modelValue":l[11]||(l[11]=a=>s.value[0].angle=a)},null,512),[[S,s.value[0].angle,void 0,{number:!0}]])])):W("",!0),"movement"in s.value[0]?(C(),E("div",mt,[l[33]||(l[33]=n("label",null,"MOVEMENT",-1)),s.value[0].movement?k((C(),E("select",{key:0,"onUpdate:modelValue":l[12]||(l[12]=a=>s.value[0].movement.type=a)},[...l[29]||(l[29]=[n("option",{value:"none"},"NONE",-1),n("option",{value:"updown"},"UP-DOWN BOUNCE",-1),n("option",{value:"rotate"},"CONTINUOUS ROTATE",-1)])],512)),[[Le,s.value[0].movement.type]]):W("",!0),s.value[0].movement&&s.value[0].movement.type!=="none"?(C(),E("div",gt,[l[30]||(l[30]=n("label",null,"SPEED",-1)),k(n("input",{type:"number",step:"0.1","onUpdate:modelValue":l[13]||(l[13]=a=>s.value[0].movement.speed=a)},null,512),[[S,s.value[0].movement.speed,void 0,{number:!0}]]),l[31]||(l[31]=n("label",null,"RANGE",-1)),k(n("input",{type:"number","onUpdate:modelValue":l[14]||(l[14]=a=>s.value[0].movement.range=a)},null,512),[[S,s.value[0].movement.range,void 0,{number:!0}]]),l[32]||(l[32]=n("label",null,"PHASE OFFSET",-1)),k(n("input",{type:"number",step:"0.1","onUpdate:modelValue":l[15]||(l[15]=a=>s.value[0].movement.phase=a)},null,512),[[S,s.value[0].movement.phase,void 0,{number:!0}]])])):W("",!0)])):W("",!0),n("button",{onClick:G,class:"delete-btn"},"DELETE OBJECT")])):s.value.length>1?(C(),E("div",yt,[n("div",wt,[l[34]||(l[34]=n("label",null,"MULTIPLE SELECTION",-1)),n("span",xt,P(s.value.length)+" OBJECTS",1)]),n("button",{onClick:G,class:"delete-btn"},"DELETE ALL")])):(C(),E("div",Mt," SELECT OBJECTS TO MODIFY ")),n("div",kt,[l[35]||(l[35]=n("h3",null,"LEVEL CONFIG",-1)),l[36]||(l[36]=n("label",null,"TOTAL DURATION (S)",-1)),k(n("input",{type:"number","onUpdate:modelValue":l[16]||(l[16]=a=>u.value.duration=a),onChange:te},null,544),[[S,u.value.duration,void 0,{number:!0}]]),l[37]||(l[37]=n("label",null,"DIFFICULTY",-1)),k(n("input",{type:"number","onUpdate:modelValue":l[17]||(l[17]=a=>u.value.difficulty=a)},null,512),[[S,u.value.difficulty,void 0,{number:!0}]])]),n("div",Tt,[l[39]||(l[39]=n("h3",null,"AUDIO CONFIG",-1)),l[40]||(l[40]=n("label",null,"BPM",-1)),k(n("input",{type:"number","onUpdate:modelValue":l[18]||(l[18]=a=>u.value.bpm=a)},null,512),[[S,u.value.bpm,void 0,{number:!0}]]),l[41]||(l[41]=n("label",null,"MEASURE LENGTH (S)",-1)),k(n("input",{type:"number",step:"0.1","onUpdate:modelValue":l[19]||(l[19]=a=>u.value.measureLength=a)},null,512),[[S,u.value.measureLength,void 0,{number:!0}]]),n("div",St,[l[38]||(l[38]=n("label",null,"AUDIO FILE",-1)),n("button",{onClick:Se,class:"upload-btn"},P(u.value.audioData?"AUDIO LOADED":"UPLOAD MP3"),1),n("input",{type:"file",ref_key:"audioInputRef",ref:Q,accept:"audio/*",style:{display:"none"},onChange:Oe},null,544),u.value.audioData?(C(),E("p",Ot,"Audio embedded in map data")):W("",!0)])])])])]))}}),Dt=be(Pt,[["__scopeId","data-v-ac3287de"]]);export{Dt as default};
